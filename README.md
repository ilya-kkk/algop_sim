# Algop Simulation

Проект для симуляции и тестирования алгоритмов навигации робота.

## Структура проекта

```
.
├── workspace/                 # ROS рабочее пространство
│   ├── src/
│   │   └── algop_sim/        # ROS пакет с симуляцией
│   │       ├── config/       # Конфигурационные файлы
│   │       ├── launch/       # Launch файлы
│   │       ├── scripts/      # Python скрипты
│   │       ├── urdf/         # Описание робота
│   │       └── worlds/       # Миры для симуляции
├── pc_run/                   # Скрипты для запуска на ПК
│   ├── docker-compose.yml    # Конфигурация Docker
│   ├── docker_new.bash       # Скрипт создания нового контейнера
│   └── docker_run.bash       # Скрипт запуска контейнера
└── README.md                 # Этот файл
```

## Описание компонентов

### ROS пакет algop_sim

- `scripts/scan_to_tf.py` - Нода для преобразования данных лазерного сканера в tf-преобразования
- `scripts/slam.py` - Нода EKF SLAM для оценки положения робота
- `config/` - Конфигурационные файлы для настройки параметров
- `launch/` - Launch файлы для запуска симуляции
- `urdf/` - Описание робота в формате URDF
- `worlds/` - Миры для симуляции в Gazebo

### Скрипты для Docker

- `docker-compose.yml` - Конфигурация Docker контейнера
- `docker_new.bash` - Скрипт для создания нового контейнера
- `docker_run.bash` - Скрипт для запуска существующего контейнера

## Инструкция по запуску

### Предварительные требования

- Установленный Docker
- Установленный Docker Compose
- Доступ к интернету для загрузки образов

### Запуск симуляции

1. Создание нового контейнера:
```bash
cd pc_run
./docker_new.bash
```

2. Запуск существующего контейнера:
```bash
cd pc_run
./docker_run.bash
```

3. После запуска контейнера:
   - Откроется терминал внутри контейнера
   - Будет автоматически запущена симуляция
   - Для остановки симуляции нажмите Ctrl+C
   - Для выхода из контейнера введите `exit`

### Запуск отдельных компонентов

После запуска контейнера можно запускать отдельные компоненты:

1. Запуск EKF SLAM:
```bash
rosrun algop_sim slam.py
```

2. Запуск преобразования скана в tf:
```bash
rosrun algop_sim scan_to_tf.py
```

## Настройка параметров

Параметры EKF SLAM можно настроить в файле `slam.py`:
- `Q` - матрица шума процесса
- `R` - матрица шума измерений
- `covariance` - начальная ковариация

## Отладка

Для отладки можно использовать:
- `rostopic list` - список активных топиков
- `rostopic echo /topic_name` - просмотр сообщений в топике
- `rviz` - визуализация tf-преобразований и данных
- `rosrun rqt_tf_tree rqt_tf_tree` - просмотр дерева tf-преобразований 